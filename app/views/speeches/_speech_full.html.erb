<div class="panel panel-default">
  <div class="panel-body">
    <div class="row">
        <div class="media">
          <a class="pull-left" href="#" style="margin:0; padding:0">
            <img class="media-object" style="max-height:60px;max-width:60px" src="/assets/default-profile.png">
          </a>
          <div class="media-body" style="padding-left:10px">
              <h3 style="margin-top:0px; margin-bottom:0px"><%= @speech.first_name %> <%= @speech.last_name %> at <%= @speech.venue %> on <%= @speech.format_date %></h3>
              <h5><i class="fa fa-check-circle" aria-hidden="true"></i> Created by <%= "#{@speech.creator.first_name} #{@speech.creator.last_name}" %> </h5>
          </div>
        </div>
    </div>
    <div class="row">
      <div class="col-lg-12 col-md-12 col-sm-12" style="margin-left:0px; padding-left:0px; margin-right:0px; padding-right:0px">
        <h4 style="padding-bottom:0px">
          <%= @speech.title %>
        </h4>
      </div>
    </div>
    <div class="row">
      <div id="content-div" class="col-lg-12 col-md-12 col-sm-12 nopadding">
        <p class="nopadding" id="main-record-index">
          <%= @speech.content %>
        </p>
      </div>
    </div>
  </div>
</div><!-- show-full -->
<script type="text/javascript">
$(document).ready(function() {
var selectedHighlights = [];

$('#add-highlights-button').on('click', function(e){
  console.log("clicked add-highlights-button");
  e.stopPropogation();
  var contentDiv = document.getElementById("content-div");
});

$("#main-record-index").on('mouseup', function(){
  console.log("clicked main record index", this);
  var result = getSelectionCharOffsetsWithin(this);
  selectedHighlights.push("[" + result.start + ": " + result.end + "]");
  alert(selectedHighlights);
})


function getSelectionCharOffsetsWithin(element) {
  var start = 0, end = 0;
  var sel, range, priorRange;
  if (typeof window.getSelection != "undefined") {
    range = window.getSelection().getRangeAt(0)
    priorRange = range.cloneRange();
    priorRange.selectNodeContents(element);
    priorRange.setEnd(range.startContainer, range.startOffset);
    start = priorRange.toString().length;
    end = start + range.toString().length;
  } else if (typeof document.selection != "undefined" &&
    (sel = document.selection).type != "Control") {
    range = sel.createRange();
    priorRange = document.body.createTextRange();
    priorRange.moveToElementText(element);
    priorRange.setEndPoint("EndToStart", range);
    start = priorRange.text.length;
    end = start + range.text.length;
  }
  return {
    start: start,
    end: end
  };
}
})

</script>
